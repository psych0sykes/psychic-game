<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>SHAPES!</title>
</head>
<body>
    <div class="row">
        
        <div class="col-md-2">
            <div id="guessLeft" class="score"></div>
        </div>
           <div class="col-md-8 blue">
               <header class="row red">
                   SHAPES!
               </header>
               <div class="row">
                    <div class="col-md-6 blue">
                        <div id="wrongput"></div>
                    </div>
                    <div class="col-md-6 yellow flexcol">
                        <div id="wordBlanks" class="row"></div>
                    </div>
               </div>
           </div>
        <div class="col-md-2">
            <div id="scoreRight" class="score"></div>
        </div>

    </div>
</body>
<script> 
//src="assets/javascript/game.js"

console.log("JS READY")

var words = [
    "square",
    "circle",
    "triangle",
    "rectangle",
    "octagon",
    "hexagon",
    "pentagon",
    "polygon",
    "obtuse",
    "acute",
    "angle",
    "corner",
    "concave",
    "convex",
    "sides",]

console.log(words)
var userGuess;
var guesses;
var secretWord;
var secretArray;
var win;
var rowNumber = 0;
var score = 0;
var wrongput = document.getElementById("wrongput");
var rightput = document.getElementById("wordBlanks");

function randomWord () {
    secretWord = words[Math.round((Math.random() * (words.length)))];
    console.log(secretWord);
}

function makeArray () {
    secretArray = Array.from(secretWord);
    console.log(secretArray);

}

function guessDisplay() {
    document.getElementById("guessLeft").textContent = (guesses);
}
function scoreboard() {
    document.getElementById("scoreRight").textContent = (score);
}

function wordDivs() {
    var wordRow = document.createElement("div");
    wordRow.id = (rowNumber);
    wordRow.className = "row words";
    console.log("Row Number: " + rowNumber);
    document.getElementById("wordBlanks").appendChild(wordRow);
    

    for (var i = 0; i < secretArray.length; i++) {
        var newDiv = document.createElement("div");
        newDiv.className = (secretArray[i]) + " ltrdiv";
        newDiv.textContent = ("_");
        document.getElementById(rowNumber).appendChild(newDiv);
        
    }
    guesses = 12;
    win = 0;
    guessDisplay()
    scoreboard()
    ++rowNumber;
    console.log("Next row: " + rowNumber);
}

function clearChildren(a) {
  while (a.hasChildNodes()) {
    a.removeChild(a.firstChild);
  }
}

function scoreChange(a) {
    if(a === 0) {
        score = 0
    }
    if(a > 0) {
        score = score + a
    }
    scoreboard()
}

randomWord ();
makeArray ();
wordDivs();

var b = document.getElementsByClassName("ltrdiv")
console.log(b)

document.onkeyup = function(guess) {
    var userGuess = guess.key;
    //console.log(userGuess);
    if (secretWord.includes(userGuess)) {
        var x = document.getElementsByClassName(userGuess);
        for (var i = 0; i < x.length; i++) {
            x[i].textContent = (userGuess);
            win = ++win;
            console.log(win);
            console.log("Secret Array: " + secretArray.length)
            console.log(i)  
        }
        for (var i = 0; i < x.length; i++) {
            x[i].className = ("done");  
        }
    }
    
    else {
        if (document.getElementById(userGuess + "_guessed")) {
            console.log("GUESSED!")
        }
        else{
        guesses = --guesses;
        console.log(guesses);
        guessDisplay()
        var newDiv = document.createElement("div");
        newDiv.id = (userGuess + "_guessed");
        newDiv.className = ("guessed");
        newDiv.textContent = (userGuess);
        wrongput.appendChild(newDiv);
        }
    }

    function winner () {
    if (win === secretArray.length) {
            alert("SHAPES!")
            scoreChange(win)
            randomWord ();
            makeArray ();
            wordDivs();
            clearChildren(wrongput);
        }
    }
    winner ()

    function loser () {
    if (guesses < 1) {
        alert("LOSER!");
        scoreChange(0)
        clearChildren(wrongput);
        clearChildren(rightput);
        randomWord ();
        makeArray ();
        wordDivs();
        }
    }
    loser ()
}






</script>
</html>